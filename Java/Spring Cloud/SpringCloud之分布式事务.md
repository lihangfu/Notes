# 介绍

当我们服务的数据源来自多数据库时，我们就需要面临着同时操作多个不同的库的事务问题。

一句话，一个业务操作需要跨多个数据源

每个服务内部的数据一致性由本地事务保证，但是全局的数据一致性问题没法保证

# Seata

# 能干嘛

## 一个典型的分布式事务过程

* Transaction ID XID；全局唯一的事务ID
* Transaction Coordinator（TC）：事务协调器，维护全局事务的运行状态，负载协调并驱动全局事务的提交或回滚。
* Transaction Manager（TM）：控制全局事务的边界，负责开启一个全局事务，并最终发起全局提交或全局回滚的决议。
* Resource Manager（RM）:控制分支事务，负责分支注册，状态汇报，并接受事务协调器的指令，驱动分支（本地）事务的提交和回滚。


1. TM向TC申请开启一个全局事务，全局事务创建成功并生成一个全局唯一的XID；
2. XID在微服务调用链路的上下文中传播；
3. RM向TC注册分支事务，将其纳入XID对应全局事务的管辖；
4. TM向TC发起针对XID的全局提交或回滚决议；
5. TC调度XID下管辖的全部分支事务完成提交或回滚请求。



# 怎么玩

* 官网下载seata
* 修改file.conf
    * 修改service模块下的默认组default为其它名称xxx_tx_group
    * 找到store模块mode的file改为db
    * 修改db模块的数据库信息为你自己的数据库信息